/// search type of CBU 4W and other

function myFunction() {
  var str = "The"; 
  var gabung = str.split(" ").join("")
  var res = gabung.search(/ain/gi);
  
  
  if (res > 0) {
 	 document.getElementById("demo").innerHTML = res;
     }
  else {
  	document.getElementById("demo").innerHTML = "There is no string you serching for";
  }
}

// To update/upsert a document inside MongoDB you can use the below-mentioned method, Mongoose now supports this natively with findOneAndUpdate (calls MongoDB //findAndModify).

//The upsert = true option creates the object if it doesn't exist. defaults to false.


    var query = {'username':req.user.username}; 

    req.newData.username = req.user.username; MyModel.findOneAndUpdate(query, req.newData, {upsert:true}, function(err, doc){ 

    if (err) return res.send(500, { error: err }); 

    return res.send("succesfully saved"); 

    });
    
    
    //continue statement
    var text = "";
    var i;
    for (i = 0; i < 5; i++) {
      if (i === 3) {
      continue;
      }
      text += "The number is " + i + "<br>";
    }



  
  
  for ( i=0; i>tblPibHdrUpload.length; i++){
    var newHdr = {
    CAR: req.body.CAR,
    KdKpbc: req.body.KdKpbc,
    PibNo: req.body.PibNo,
    PibTg: req.body.PibTg,
    JnPib: req.body.JnPib,
    JnImp: req.body.JnImp,
    JkWaktu: req.body.JkWaktu,
    CrByr: req.body.CrByr,
    DokTupKd: req.body.DokTupKd,
    DokTupNo: req.body.DokTupNo,
    DokTupTg: req.body.DokTupTg,
    PosNo: req.body.PosNo,
    PosSub: req.body.PosSub,
    PosSubSub: req.body.PosSubSub,
    ImpId: req.body.ImpId,
    ImpNpwp: req.body.ImpNpwp,
    ImpNama: req.body.ImpNama,
    ImpAlmt: req.body.ImpAlmt,
    ImpStatus: req.body.ImpStatus,
    ApiKd: req.body.ApiKd,
    ApiNo: req.body.ApiNo,
    PpjkId: req.body.PpjkId,
    PpjkNpwp: req.body.PpjkNpwp,
    PpjkNama: req.body.PpjkNama,
    PpjkAlmt: req.body.PpjkAlmt,
    PpjkNo: req.body.PpjkNo,
    PpjkTg: req.body.PpjkTg,
    IndId: req.body.IndId,
    IndNpwp: req.body.Npwp,
    IndNama: req.body.IndNama,
    IndAlmt: req.body.IndAlmt,
    PasokNama: req.body.PasokNama,
    PasokAlmt: req.body.PasokAlmt,
    PasokNeg: req.body.PasokNeg,
    PelBkr: req.body.PelBkr,
    PelMuat: req.body.PelMuat,
    PelTransit: req.body.PelTransit,
    TmpTbn: req.body.TmpTbn,
    Moda: req.body.Moda,
    AngkutNama: req.body.AngkutNama,
    AngkutNo: req.body.AngkutNo,
    AngkutFl: req.body.AngkutFl,
    TgTiba: TgTiba,
    KdVal: req.body.KdVal,
    Ndpbm: req.body.Ndpbm,
    NilInv: req.body.NillInv,
    Freight: req.body.Freight,
    BTambahan: req.body.BTambahan,
    Diskon: req.body.Diskon,
    KdAss: req.body.KdAss,
    Asuransi: req.body.Asuransi,
    KdHrg: req.body.KdHrg,
    Fob: req.body.Fob,
    Cif: req.body.Cif,
    Bruto: req.body.Bruto,
    Netto: req.body.Netto,
    JmCont: req.body.JmCont,
    JmBrg: req.body.JmBrg,
    Status: req.body.Status,
    Snrf: req.body.Snrf,
    KdFas: req.body.Kdfas,
    Lengkap: req.body.Lengkap,
    BillNpwp: req.body.BillNpwp,
    BillNama: req.body.BillNama,
    BillAlmt: req.body.BillAlmt,
    PenjualNama: req.body.PenjualNama,
    PenjualAlmt: req.body.PenjualAlmt,
    PenjualNeg: req.body.PenjualNeg,
    Pernyataan: req.body.Pernyataan,
    JnsTrans: req.body.JnsTrans,
    VD: req.body.VD,
    VersiModul: req.body.VersiModul,
    NilVd: NillVd,
    commodity: req.body.commodity,
    typeOfShipment: req.body.typeOfShipment,
    clearancePaymentStatus: req.body.clearancePaymentStatus || false,
    clearancePayments4W: req.body.clearancePayments4W || null,
    clearancePaymentsFCL: req.body.clearancePaymentsFCL || null,
    clearancePaymentsLCL: req.body.clearancePaymentsLCL|| null,
    clearancePaymentsAir: req.body.clearancePaymentsLCL || null,
    remmitanceStatus: req.body.remmitanceStatus || false,
    userHistory: req.body.userHistory || null
    }
  
    var query: {
      CAR: req.body.CAR
    }
    var newPib = tblPibHdr.findOneAndUpdate(query, newHdr, {upsert: true}, (err, HdrData)=>{
    if(!err){
      console.log(`data CAR ${HdrData.CAR} insert succesfull`)
      //call other function for loop other table update (temporary strategy using "tblPibHdrUpload[i].CAR == otherPibTableUpload[i].CAR")
    } else {
      console.log(`data CAR ${tblPibHdrUpload[i].CAR} Already Exist`)
      continue
    }
  }
